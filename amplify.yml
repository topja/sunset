version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm install  # Instala las dependencias
    build:
      commands:
        - npm run build  # Construye la app usando el script de Vite
  artifacts:
    baseDirectory: dist  # Carpeta donde Vite genera los archivos de build
    files:
      - '**/*'  # Incluye todos los archivos en la carpeta dist
  cache:
    paths: []  
  customHeaders:
    - pattern: '**/*.js'
      headers:
        - key: "Content-Type"
          value: "application/javascript"
    - pattern: '**/*.css'
      headers:
        - key: "Content-Type"
          value: "text/css"
    - pattern: '**/*.woff2'
      headers:
        - key: "Content-Type"
          value: "font/woff2"

redirects:
  - source: /assets/<*>       # Asegura que todo lo de /assets sea servido correctamente
    target: /assets/<*>       # No redirige a index.html
    status: 200

  - source: /<*>              # Redirige todo lo dem√°s a index.html
    target: /index.html
    status: 200

